#!/bin/bash

RESULTS_OUTPUT=$(find . -name "*.php" -type f ! -path "test/*" ! -path "*/vendor/*" ! -path "doc/*" -print0 | xargs -0 -n1 -P8 php -l -n)
RESULTS_RETURN=$?

echo "$RESULTS_OUTPUT" | grep -v "No syntax errors detected"

exit $RESULTS_RETURN
